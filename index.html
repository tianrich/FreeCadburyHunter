<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>Cadbury Secret Santa - Intelligence Hub</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;600;700&family=JetBrains+Mono:wght@400;600&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.2/dist/confetti.browser.min.js"></script>
<style>
:root{
  --primary:#7c3aed;
  --primary-dark:#6d28d9;
  --accent:#fbbf24;
  --bg:#09090b;
  --surface:#18181b;
  --surface-light:#27272a;
  --border:#3f3f46;
  --text:#fafafa;
  --text-muted:#a1a1aa;
  --success:#22c55e;
  --error:#ef4444;
  --warning:#f59e0b;
}

*{margin:0;padding:0;box-sizing:border-box}
body{
  background:#09090b;
  font-family:'Space Grotesk',sans-serif;
  color:var(--text);
  line-height:1.6;
  overflow-x:hidden;
}

.grid-bg{
  position:fixed;
  inset:0;
  background-image:
    linear-gradient(var(--border) 1px,transparent 1px),
    linear-gradient(90deg,var(--border) 1px,transparent 1px);
  background-size:50px 50px;
  opacity:0.2;
  pointer-events:none;
  z-index:0;
}

.header{
  background:rgba(24,24,27,0.8);
  backdrop-filter:blur(20px);
  border-bottom:1px solid var(--border);
  position:sticky;
  top:0;
  z-index:1000;
}

.header-content{
  max-width:1800px;
  margin:0 auto;
  padding:16px 32px;
  display:flex;
  align-items:center;
  justify-content:space-between;
}

.brand{
  display:flex;
  align-items:center;
  gap:16px;
}

.brand-logo{
  width:40px;
  height:40px;
  position:relative;
}

.brand-text h1{
  font-size:20px;
  font-weight:700;
  color:var(--text);
  letter-spacing:-0.5px;
}

.brand-text p{
  font-size:12px;
  color:var(--text-muted);
  font-family:'JetBrains Mono',monospace;
}

.header-status{
  display:flex;
  align-items:center;
  gap:8px;
  padding:8px 16px;
  background:rgba(34,197,94,0.1);
  border:1px solid rgba(34,197,94,0.3);
  border-radius:20px;
}

.status-dot{
  width:8px;
  height:8px;
  background:var(--success);
  border-radius:50%;
  animation:pulse 2s infinite;
}

@keyframes pulse{
  0%,100%{opacity:1}
  50%{opacity:0.5}
}

.header-status span{
  font-size:13px;
  font-weight:600;
  color:var(--success);
  font-family:'JetBrains Mono',monospace;
}

.container{
  max-width:1800px;
  margin:0 auto;
  padding:32px;
  position:relative;
  z-index:1;
}

.stats-row{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(280px,1fr));
  gap:20px;
  margin-bottom:32px;
}

.stat-card{
  background:var(--surface);
  border:1px solid var(--border);
  border-radius:12px;
  padding:24px;
  position:relative;
  overflow:hidden;
  transition:all 0.3s;
}

.stat-card::before{
  content:'';
  position:absolute;
  top:0;
  left:0;
  right:0;
  height:2px;
  background:linear-gradient(90deg,var(--primary),var(--accent));
  opacity:0;
  transition:opacity 0.3s;
}

.stat-card:hover{
  border-color:var(--primary);
  transform:translateY(-4px);
}

.stat-card:hover::before{
  opacity:1;
}

.stat-header{
  display:flex;
  justify-content:space-between;
  align-items:flex-start;
  margin-bottom:16px;
}

.stat-label{
  font-size:13px;
  font-weight:600;
  color:var(--text-muted);
  text-transform:uppercase;
  letter-spacing:1px;
}

.stat-icon{
  width:40px;
  height:40px;
  background:rgba(124,58,237,0.1);
  border-radius:8px;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:20px;
}

.stat-value{
  font-size:36px;
  font-weight:700;
  color:var(--text);
  font-family:'JetBrains Mono',monospace;
}

.main-grid{
  display:grid;
  grid-template-columns:1fr 380px;
  gap:24px;
  margin-bottom:32px;
}

.panel{
  background:var(--surface);
  border:1px solid var(--border);
  border-radius:12px;
  overflow:hidden;
}

.panel-header{
  padding:20px 24px;
  border-bottom:1px solid var(--border);
  display:flex;
  align-items:center;
  justify-content:space-between;
}

.panel-title{
  font-size:16px;
  font-weight:700;
  color:var(--text);
  display:flex;
  align-items:center;
  gap:12px;
}

.panel-badge{
  background:rgba(124,58,237,0.15);
  color:var(--primary);
  padding:4px 12px;
  border-radius:12px;
  font-size:11px;
  font-weight:700;
  font-family:'JetBrains Mono',monospace;
}

.panel-body{
  padding:24px;
  max-height:600px;
  overflow-y:auto;
}

.panel-body::-webkit-scrollbar{width:8px}
.panel-body::-webkit-scrollbar-track{background:transparent}
.panel-body::-webkit-scrollbar-thumb{background:var(--border);border-radius:4px}
.panel-body::-webkit-scrollbar-thumb:hover{background:var(--surface-light)}

.activity-feed{
  padding:0;
}

.activity-item{
  padding:20px 24px;
  border-bottom:1px solid var(--border);
  transition:all 0.2s;
  position:relative;
}

.activity-item::before{
  content:'';
  position:absolute;
  left:0;
  top:0;
  bottom:0;
  width:3px;
  background:var(--primary);
  opacity:0;
  transition:opacity 0.2s;
}

.activity-item:hover{
  background:rgba(124,58,237,0.05);
}

.activity-item:hover::before{
  opacity:1;
}

.activity-item:last-child{
  border-bottom:none;
}

.activity-header{
  display:flex;
  justify-content:space-between;
  align-items:center;
  margin-bottom:8px;
}

.activity-status{
  display:flex;
  align-items:center;
  gap:8px;
  font-size:13px;
  font-weight:700;
  font-family:'JetBrains Mono',monospace;
}

.status-icon{
  width:20px;
  height:20px;
  border-radius:4px;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:11px;
}

.status-success{color:var(--success)}
.status-success .status-icon{background:rgba(34,197,94,0.15)}

.status-error{color:var(--error)}
.status-error .status-icon{background:rgba(239,68,68,0.15)}

.status-warning{color:var(--warning)}
.status-warning .status-icon{background:rgba(245,158,11,0.15)}

.status-info{color:var(--text-muted)}
.status-info .status-icon{background:rgba(161,161,170,0.15)}

.activity-time{
  font-size:12px;
  color:var(--text-muted);
  font-family:'JetBrains Mono',monospace;
}

.activity-message{
  font-size:14px;
  color:var(--text);
  line-height:1.5;
}

.claim-btn{
  display:inline-flex;
  align-items:center;
  gap:8px;
  background:linear-gradient(135deg,var(--primary),var(--primary-dark));
  color:#fff;
  padding:8px 16px;
  border-radius:6px;
  font-size:13px;
  font-weight:700;
  text-decoration:none;
  margin-top:12px;
  transition:all 0.3s;
}

.claim-btn:hover{
  transform:scale(1.05);
  box-shadow:0 8px 24px rgba(124,58,237,0.4);
}

.command-panel{
  display:flex;
  flex-direction:column;
  gap:24px;
}

.operator-card{
  background:linear-gradient(135deg,rgba(124,58,237,0.1),rgba(251,191,36,0.1));
  border:1px solid var(--border);
  border-radius:12px;
  padding:32px;
  text-align:center;
}

.operator-avatar{
  width:80px;
  height:80px;
  border-radius:50%;
  display:flex;
  align-items:center;
  justify-content:center;
  margin:0 auto 16px;
  position:relative;
  background:var(--surface-light);
  border:2px solid var(--border);
}

.operator-name{
  font-size:24px;
  font-weight:700;
  color:var(--text);
  margin-bottom:4px;
}

.operator-role{
  font-size:13px;
  color:var(--text-muted);
  margin-bottom:24px;
}

.social-btn{
  display:inline-flex;
  align-items:center;
  justify-content:center;
  gap:8px;
  background:var(--surface-light);
  color:var(--text);
  padding:12px 24px;
  border-radius:8px;
  font-size:14px;
  font-weight:600;
  text-decoration:none;
  transition:all 0.3s;
  border:1px solid var(--border);
}

.social-btn:hover{
  background:var(--primary);
  border-color:var(--primary);
  transform:translateY(-2px);
}

.share-panel{
  padding:24px;
}

.share-title{
  font-size:14px;
  font-weight:700;
  color:var(--text);
  margin-bottom:16px;
}

.share-grid{
  display:grid;
  gap:12px;
}

.share-btn{
  display:flex;
  align-items:center;
  gap:12px;
  padding:12px 16px;
  background:var(--surface-light);
  border:1px solid var(--border);
  border-radius:8px;
  color:var(--text);
  text-decoration:none;
  font-size:14px;
  font-weight:600;
  transition:all 0.3s;
}

.share-btn:hover{
  border-color:var(--primary);
  transform:translateX(4px);
}

.share-icon{
  width:32px;
  height:32px;
  border-radius:6px;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:16px;
}

.share-twitter .share-icon{background:rgba(29,161,242,0.15);color:#1da1f2}
.share-facebook .share-icon{background:rgba(24,119,242,0.15);color:#1877f2}
.share-linkedin .share-icon{background:rgba(10,102,194,0.15);color:#0a66c2}
.share-copy .share-icon{background:rgba(124,58,237,0.15);color:var(--primary)}

.footer{
  margin-top:64px;
  padding:32px;
  text-align:center;
  border-top:1px solid var(--border);
}

.footer-credit{
  font-size:14px;
  color:var(--text-muted);
}

.footer-credit a{
  color:var(--accent);
  text-decoration:none;
  font-weight:600;
}

.footer-credit a:hover{
  text-decoration:underline;
}

.toast{
  position:fixed;
  top:80px;
  right:32px;
  background:var(--surface);
  border:1px solid var(--success);
  border-radius:12px;
  padding:20px 24px;
  min-width:360px;
  box-shadow:0 20px 40px rgba(0,0,0,0.5);
  z-index:9999;
  display:none;
  animation:slideIn 0.4s ease;
}

@keyframes slideIn{
  from{transform:translateX(100%);opacity:0}
  to{transform:translateX(0);opacity:1}
}

.toast-header{
  display:flex;
  align-items:center;
  gap:12px;
  margin-bottom:8px;
}

.toast-icon{
  width:32px;
  height:32px;
  background:rgba(34,197,94,0.15);
  border-radius:6px;
  display:flex;
  align-items:center;
  justify-content:center;
  color:var(--success);
  font-size:16px;
}

.toast-title{
  font-size:16px;
  font-weight:700;
  color:var(--text);
}

.toast-message{
  font-size:14px;
  color:var(--text-muted);
  margin-left:44px;
}

@media(max-width:1200px){
  .main-grid{grid-template-columns:1fr}
  .stats-row{grid-template-columns:repeat(2,1fr)}
}

@media(max-width:768px){
  .stats-row{grid-template-columns:1fr}
  .header-content{flex-direction:column;gap:16px}
  .container{padding:16px}
}
</style>
</head>
<body>
<div class="grid-bg"></div>

<div class="header">
  <div class="header-content">
    <div class="brand">
      <div class="brand-logo">
        <svg viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
          <defs>
            <linearGradient id="logoGrad" x1="0%" y1="0%" x2="100%" y2="100%">
              <stop offset="0%" style="stop-color:#7c3aed;stop-opacity:1" />
              <stop offset="100%" style="stop-color:#fbbf24;stop-opacity:1" />
            </linearGradient>
          </defs>
          <rect width="40" height="40" rx="8" fill="url(#logoGrad)" opacity="0.15"/>
          <path d="M20 8L12 14V26L20 32L28 26V14L20 8Z" fill="url(#logoGrad)" stroke="url(#logoGrad)" stroke-width="1.5"/>
          <circle cx="20" cy="20" r="4" fill="#09090b"/>
          <circle cx="20" cy="20" r="2.5" fill="url(#logoGrad)"/>
          <path d="M20 12V16M20 24V28M12 20H16M24 20H28" stroke="#fbbf24" stroke-width="1.5" stroke-linecap="round" opacity="0.6"/>
        </svg>
      </div>
      <div class="brand-text">
        <h1>Cadbury Intelligence Hub</h1>
        <p>SECRET SANTA MONITORING SYSTEM</p>
      </div>
    </div>
    <div class="header-status">
      <div class="status-dot"></div>
      <span>SYSTEM ONLINE</span>
    </div>
  </div>
</div>

<div class="container">
  <div class="stats-row">
    <div class="stat-card">
      <div class="stat-header">
        <div class="stat-label">Endpoints Scanned</div>
        <div class="stat-icon">üì°</div>
      </div>
      <div class="stat-value" id="checked">0</div>
    </div>
    <div class="stat-card">
      <div class="stat-header">
        <div class="stat-label">Successful Captures</div>
        <div class="stat-icon">‚úì</div>
      </div>
      <div class="stat-value" id="success">0</div>
    </div>
    <div class="stat-card">
      <div class="stat-header">
        <div class="stat-label">Active Runtime</div>
        <div class="stat-icon">‚è±</div>
      </div>
      <div class="stat-value" id="uptime">00:00</div>
    </div>
    <div class="stat-card">
      <div class="stat-header">
        <div class="stat-label">Latest Detection</div>
        <div class="stat-icon">‚ö°</div>
      </div>
      <div class="stat-value" id="last" style="font-size:20px">Standby</div>
    </div>
  </div>

  <div class="main-grid">
    <div class="panel">
      <div class="panel-header">
        <div class="panel-title">
          <span>üìä</span>
          Surveillance Feed
        </div>
        <div class="panel-badge">LIVE</div>
      </div>
      <div class="panel-body activity-feed" id="activityLog">
        <div class="activity-item">
          <div class="activity-header">
            <div class="activity-status status-info">
              <div class="status-icon">‚óè</div>
              INITIALIZED
            </div>
            <div class="activity-time">Now</div>
          </div>
          <div class="activity-message">Intelligence hub activated. Monitoring 20 Secret Santa endpoints globally.</div>
        </div>
      </div>
    </div>

    <div class="command-panel">
      <div class="panel">
        <div class="operator-card">
          <div class="operator-avatar">
            <svg viewBox="0 0 80 80" fill="none" xmlns="http://www.w3.org/2000/svg">
              <defs>
                <linearGradient id="avatarGrad" x1="0%" y1="0%" x2="100%" y2="100%">
                  <stop offset="0%" style="stop-color:#7c3aed;stop-opacity:1" />
                  <stop offset="100%" style="stop-color:#fbbf24;stop-opacity:1" />
                </linearGradient>
              </defs>
              <circle cx="40" cy="32" r="12" fill="url(#avatarGrad)"/>
              <path d="M20 60C20 51 28 44 40 44C52 44 60 51 60 60" stroke="url(#avatarGrad)" stroke-width="6" stroke-linecap="round"/>
            </svg>
          </div>
          <div class="operator-name">@paparichens</div>
          <div class="operator-role">Operations Director</div>
          <a href="https://x.com/paparichens" target="_blank" class="social-btn">
            <span>ùïè</span>
            Follow on X
          </a>
        </div>
      </div>

      <div class="panel">
        <div class="panel-header">
          <div class="panel-title">
            <span>üîó</span>
            Share Intel
          </div>
        </div>
        <div class="share-panel">
          <div class="share-grid">
            <a href="#" class="share-btn share-twitter" onclick="shareTwitter();return false">
              <div class="share-icon">ùïè</div>
              <div>Share on X</div>
            </a>
            <a href="#" class="share-btn share-facebook" onclick="shareFacebook();return false">
              <div class="share-icon">f</div>
              <div>Share on Facebook</div>
            </a>
            <a href="#" class="share-btn share-linkedin" onclick="shareLinkedIn();return false">
              <div class="share-icon">in</div>
              <div>Share on LinkedIn</div>
            </a>
            <a href="#" class="share-btn share-copy" onclick="copyLink();return false">
              <div class="share-icon">üìã</div>
              <div>Copy Link</div>
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="footer">
  <div class="footer-credit">
    Cadbury Intelligence Hub ‚Ä¢ Built by <a href="https://x.com/paparichens" target="_blank">@paparichens</a>
  </div>
</div>

<div class="toast" id="toast">
  <div class="toast-header">
    <div class="toast-icon">‚úì</div>
    <div class="toast-title" id="toastTitle">Success</div>
  </div>
  <div class="toast-message" id="toastMessage">Operation completed</div>
</div>

<audio id="alertSound" src="https://cdn.freesound.org/previews/612/612558_5674468-lq.mp3"></audio>

<script>
let successCount=0,checkedCount=0;const start=Date.now();

setInterval(()=>{
  let s=Math.floor((Date.now()-start)/1000);
  let m=String(Math.floor(s/60)).padStart(2,"0");
  let sec=String(s%60).padStart(2,"0");
  document.getElementById("uptime").textContent=`${m}:${sec}`;
},1000);

function showToast(title,message){
  document.getElementById("toastTitle").textContent=title;
  document.getElementById("toastMessage").textContent=message;
  const toast=document.getElementById("toast");
  toast.style.display="block";
  setTimeout(()=>toast.style.display="none",5000);
}

function celebrate(){
  confetti({
    particleCount:150,
    spread:70,
    origin:{y:0.6},
    colors:["#7c3aed","#fbbf24","#22c55e"]
  });
  document.getElementById("alertSound").play().catch(()=>{});
}

function addActivity(status,time,message,link=null){
  const feed=document.getElementById("activityLog");
  const item=document.createElement("div");
  item.className="activity-item";
  
  const statusClass={
    SUCCESS:"status-success",
    missed:"status-warning",
    error:"status-error",
    already_opened:"status-info"
  }[status]||"status-info";
  
  const statusText={
    SUCCESS:"SECURED",
    missed:"EXPIRED",
    error:"ERROR",
    already_opened:"CLAIMED"
  }[status]||"INFO";
  
  const btn=link?`<a href="${link}" target="_blank" class="claim-btn">‚Üí Claim Now</a>`:"";
  
  item.innerHTML=`
    <div class="activity-header">
      <div class="activity-status ${statusClass}">
        <div class="status-icon">‚óè</div>
        ${statusText}
      </div>
      <div class="activity-time">${time}</div>
    </div>
    <div class="activity-message">${message}${btn}</div>
  `;
  
  feed.insertBefore(item,feed.firstChild);
  if(feed.children.length>50)feed.removeChild(feed.lastChild);
}

function shareTwitter(){
  const text="Just secured FREE Cadbury chocolate through the Intelligence Hub by @paparichens! üç´";
  window.open(`https://x.com/intent/tweet?text=${encodeURIComponent(text)}`,"_blank");
}

function shareFacebook(){
  window.open(`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(window.location.href)}`,"_blank");
}

function shareLinkedIn(){
  window.open(`https://www.linkedin.com/sharing/share-offsite/?url=${encodeURIComponent(window.location.href)}`,"_blank");
}

function copyLink(){
  navigator.clipboard.writeText(window.location.href).then(()=>{
    showToast("Link Copied","URL copied to clipboard");
  });
}

const es=new EventSource("/events");
es.onmessage=e=>{
  JSON.parse(e.data).forEach(entry=>{
    checkedCount++;
    document.getElementById("checked").textContent=checkedCount;
    
    if(entry.status==="SUCCESS"){
      successCount++;
      document.getElementById("success").textContent=successCount;
      document.getElementById("last").textContent=entry.time;
      
      addActivity("SUCCESS",entry.time,"Redemption endpoint secured. Link is active and ready for claim.",entry.final);
      celebrate();
      showToast("Target Acquired","Cadbury chocolate secured successfully");
      
      setTimeout(()=>{
        window.open(`https://x.com/intent/tweet?text=${encodeURIComponent("üö® SECURED: Free Cadbury chocolate via @paparichens Intelligence Hub!")}`,"_blank");
      },1000);
    }
    else if(entry.status==="missed"){
      addActivity("missed",entry.time,"Endpoint scan completed. Link expired or previously claimed.");
    }
    else if(entry.status==="error"){
      addActivity("error",entry.time,"Connection interruption detected. Retrying scan sequence.");
    }
    else{
      addActivity("already_opened",entry.time,"Endpoint already processed in previous scan cycle.");
    }
  });
};
</script>
</body>
</html>
